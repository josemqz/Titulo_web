
<script setup>
defineProps({
   // diccionario con ocupación a partir de id de cada zona
   tasasOcupacion: {
      type: Object,
      required: true
  }
});
</script>

<template>
   <!-- <?xml version="1.0" encoding="UTF-8" standalone="no"?> -->
   <!-- Created with Inkscape (http://www.inkscape.org/) -->
   
   <!-- viewBox: left up right down -->
   <div class="svg-container">
      <svg class="my-svg-component"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      viewBox="30 50 200 150"
      version="1.1"
      id="svg8">
         <g
         inkscape:groupmode="layer"
         id="layer2"
         inkscape:label="Capa 2">
            <rect
               id="rect5002"
               width="2.1170654"
               height="6.3554459"
               x="169.5218"
               y="101.58434"
               ry="3.5441173e-013" />
            <rect
               id="rect5026"
               width="2.2155764"
               height="6.264401"
               x="169.3896"
               y="111.3588">
               <title
                  id="title1279">Sala Reuniones</title>
            </rect>
            <rect
               id="rect5028"
               width="3.9233551"
               height="6.2863235"
               x="175.15456"
               y="111.3588">
               <title
                  id="title1180">Baño H</title>
            </rect>
            <path
               d="M 183.56301,158.14512 Z"
               id="path5030"
               inkscape:connector-curvature="0" />
            <path
               d="m 183.54547,158.21235 3.18039,7.7e-4 -0.002,6.08842 3.70619,-0.004 0.0178,4.21426 0.0604,14.31017 -4.84265,-8.2e-4 v -1.58556 l -3.70944,-4e-5 7.1e-4,-17.9955 1.59563,0.003 z"
               id="path5040"
               inkscape:connector-curvature="0"
               sodipodi:nodetypes="cccccccccccc">
               <title
                  id="title1259">Noac Frontal</title>
            </path>
            <rect
               id="rect5046"
               width="9.0236044"
               height="4.8145976"
               x="181.97136"
               y="150.01015" />
            <rect
               id="rect5067"
               width="6.5457687"
               height="7.4128876"
               x="112.37962"
               y="177.79608" />
            <rect
               id="rect5069"
               width="5.0275803"
               height="7.4138947"
               x="107.35204"
               y="177.79507">
               <title
                  id="title1235">A-015</title>
            </rect>
            <rect
               id="rect5071"
               width="5.02211"
               height="7.4138947"
               x="102.32993"
               y="177.79507">
               <title
                  id="title1233">A-014</title>
            </rect>
            <rect
               id="rect5073"
               width="5.0278854"
               height="7.4138947"
               x="97.302048"
               y="177.79507">
               <title
                  id="title1231">A-013</title>
            </rect>
            <rect
               id="rect5073-1"
               width="4.7909393"
               height="7.4138947"
               x="92.511108"
               y="177.79507">
               <title
                  id="title1229">A-012</title>
            </rect>
            <rect
               id="rect5126"
               width="10.019028"
               height="6.6248627"
               x="75.842392"
               y="179.37823" />
            <rect
               id="rect5128"
               width="1.3835698"
               height="3.705411"
               x="85.86142"
               y="182.29768" />
            <rect
               id="rect5073-1-9"
               width="3.171577"
               height="1.3119395"
               x="89.339531"
               y="177.79507" />
            <path
               d="m 135.38784,168.55157 6.61858,0.0414 -0.002,16.67449 -3.29638,-0.0414 -0.008,-7.58917 -3.3126,-0.004 z"
               id="path5159"
               inkscape:connector-curvature="0"
               sodipodi:nodetypes="ccccccc">
               <title
                  id="title1267">Relaciones estudiantiles?</title>
            </path>
            <rect
               id="rect4541"
               width="8.1923618"
               height="6.3436899"
               x="181.96548"
               y="78.842751">
               <title
                  id="title1183">B-012</title>
            </rect>
            <rect
               id="rect4602"
               width="8.1923714"
               height="6.3481083"
               x="181.96548"
               y="85.18644">
               <title
                  id="title1185">B-011</title>
            </rect>
            <rect
               id="rect4602-8"
               width="8.2089539"
               height="5.001194"
               x="181.96548"
               y="91.534546">
               <title
                  id="title1187">B-010</title>
            </rect>
            <rect
               id="rect4672-2"
               width="8.1523743"
               height="5.0466232"
               x="181.98836"
               y="108.44025">
               <title
                  id="title1193">B-007</title>
            </rect>
            <rect
               id="rect4672-0"
               width="8.1924162"
               height="5.0323443"
               x="181.97177"
               y="113.48687">
               <title
                  id="title1195">B-006</title>
            </rect>
            <rect
               id="rect4672-3"
               width="8.1689453"
               height="4.9704208"
               x="181.97177"
               y="118.51921">
               <title
                  id="title1197">B-005</title>
            </rect>
            <rect
               id="rect4672-36"
               width="8.1689606"
               height="4.9471817"
               x="181.97177"
               y="123.48963">
               <title
                  id="title1199">B-004</title>
            </rect>
            <rect
               id="rect4672-30"
               width="8.1689606"
               height="4.9342651"
               x="181.97177"
               y="128.43681">
               <title
                  id="title1201">B-003</title>
            </rect>
            <rect
               id="rect4672-1"
               width="8.1689606"
               height="5.0081787"
               x="181.97177"
               y="133.37108">
               <title
                  id="title1203">B-002</title>
            </rect>
            <rect
               id="rect4725"
               width="8.1693668"
               height="5.0048971"
               x="181.97136"
               y="-143.38416"
               transform="scale(1,-1)">
               <title
                  id="title1205">B-001</title>
            </rect>
            <rect
               id="rect4746"
               width="14.932037"
               height="6.1868057"
               x="147.27412"
               y="111.3588">
               <title
                  id="title1281">LDS</title>
            </rect>
            <rect
               id="rect4780"
               width="10.605942"
               height="15.688942"
               x="147.27412"
               y="117.64513">
               <title
                  id="title5048">Arquitectura 1</title>
            </rect>
            <rect
               id="rect4780-3"
               width="10.644012"
               height="15.68895"
               x="157.88007"
               y="117.64513">
               <title
                  id="title5052">Auditorio</title>
            </rect>
            <rect
               id="rect4833"
               width="10.553829"
               height="15.688946"
               x="168.52408"
               y="117.64513">
               <title
                  id="title5050">Arquitectura 2</title>
            </rect>
            <rect
               id="rect4837"
               width="3.708252"
               height="6.3474426"
               x="147.30113"
               y="101.59234" />
            <rect
               id="rect4849"
               width="3.675415"
               height="6.3554382"
               x="158.41483"
               y="101.58434" />
            <rect
               id="rect4851"
               width="7.4315643"
               height="6.3554459"
               x="162.09024"
               y="101.58434" />
            <rect
               id="rect4855"
               width="7.4185333"
               height="6.3554459"
               x="171.63887"
               y="101.58434" />
            <rect
               id="rect4857"
               width="21.283335"
               height="15.759977"
               x="120.59554"
               y="92.333534">
               <title
                  id="title1165">Defider</title>
            </rect>
            <path
               d="m 120.5956,108.09353 h 21.28336 l 0.1144,26.68667 -8.12963,0.0249 -1e-5,-6.48368 -13.22088,5e-5 z"
               id="path4863"
               inkscape:connector-curvature="0"
               sodipodi:nodetypes="ccccccc">
               <title
                  id="title1167">Casino</title>
            </path>
            <rect
               id="rect4869"
               width="7.3906684"
               height="6.4836297"
               x="120.64284"
               y="128.32147">
               <title
                  id="title341">Escaleras/Ascensor</title>
            </rect>
            <rect
               y="146.08658"
               x="120.52203"
               height="12.396667"
               width="21.483017"
               id="rect4875" >
               <title
                  id="title5172">Aula Magna</title>
            </rect>
            <rect
               id="rect4891"
               width="5.0269318"
               height="9.2520142"
               x="109.99657"
               y="164.30167">
               <title
                  id="title1227">A-011</title>
            </rect>
            <rect
               id="rect4895"
               width="5.0250182"
               height="9.2561483"
               x="104.97155"
               y="164.29753">
               <title
                  id="title1225">A-010</title>
            </rect>
            <rect
               id="rect4897"
               width="4.9965744"
               height="9.2520142"
               x="99.974976"
               y="164.30167">
               <title
                  id="title1223">A-009</title>
            </rect>
            <rect
               id="rect4903"
               width="5.0078506"
               height="9.2520142"
               x="94.967125"
               y="164.30167">
               <title
                  id="title1221">A-008</title>
            </rect>
            <rect
               id="rect4905"
               width="7.1345024"
               height="9.2520142"
               x="62.376698"
               y="164.30167">
               <title
                  id="title1237">A-016</title>
            </rect>
            <rect
               id="rect4907"
               width="5.0259552"
               height="9.2520142"
               x="69.5112"
               y="164.30167">
               <title
                  id="title1213">A-004</title>
            </rect>
            <rect
               id="rect4909"
               width="5.0289001"
               height="9.2520142"
               x="74.537155"
               y="164.30167">
               <title
                  id="title1215">A-005</title>
            </rect>
            <rect
               id="rect4915"
               width="5.0289459"
               height="9.2520142"
               x="79.566055"
               y="164.30167">
               <title
                  id="title1217">A-006</title>
            </rect>
            <rect
               id="rect4917"
               width="5.0257339"
               height="9.2520142"
               x="84.595001"
               y="164.30167">
               <title
                  id="title1219">A-007</title>
            </rect>
            <rect
               id="rect4921"
               width="2.6986084"
               height="7.4842834"
               x="92.268517"
               y="164.30167">
               <title
                  id="title1186">Baño M</title>
            </rect>
            <rect
               id="rect4921-3"
               width="2.6455612"
               height="7.4851432"
               x="89.620735"
               y="164.30167">
               <title
                  id="title1188">Baño H</title>
            </rect>
            <rect
               id="rect4938"
               width="20.759914"
               height="6.0844574"
               x="74.420212"
               y="152.39198">
               <title
                  id="title1239">Dep. Humanística</title>
            </rect>
            <rect
               id="rect4942"
               width="15.217342"
               height="6.0844574"
               x="59.202869"
               y="152.39198">
               <title
                  id="title1241">Dep. Matemática</title>
            </rect>
            <rect
               id="rect4944"
               width="2.9009376"
               height="21.168612"
               x="56.301933"
               y="152.39198">
               <title
                  id="title1243">Dep. Física</title>
            </rect>
            <rect
               id="rect5024"
               width="3.5646596"
               height="6.1868067"
               x="162.20616"
               y="111.3588">
               <title
                  id="title1160">LPA</title>
            </rect>
            <rect
               id="rect5042"
               width="9.0040894"
               height="3.4367795"
               x="181.97136"
               y="143.38416">
               <title
                  id="title1192">Baño M</title>
            </rect>
            <rect
               id="rect5026-7"
               width="3.6187768"
               height="6.1131577"
               x="165.77083"
               y="111.3588" />
            <rect
               id="rect5026-70"
               width="3.5493774"
               height="6.2863235"
               x="171.60518"
               y="111.3588">
               <title
                  id="title1178">Baño M</title>
            </rect>
            <rect
               id="rect4602-8-2"
               width="8.2089539"
               height="5.001194"
               x="181.96548"
               y="96.535736">
               <title
                  id="title1189">B-009</title>
            </rect>
            <rect
               id="rect4602-8-2-2"
               width="8.2021179"
               height="5.0011749"
               x="181.9386"
               y="103.43907">
               <title
                  id="title1191">B-008</title>
            </rect>
            <rect
               id="rect5042-5"
               width="9.0040894"
               height="3.189213"
               x="181.97136"
               y="146.82094">
               <title
                  id="title1194">Baño H</title>
            </rect>
            <rect
               id="rect129"
               width="6.348084"
               height="13.221062"
               x="138.8362"
               y="76.98642">
               <title
                  id="title1169">Ingeniería Mecánica</title>
            </rect>
            <rect
               id="rect954"
               width="6.0790892"
               height="6.3634114"
               x="98.632881"
               y="152.11729">
               <title
                  id="title1207">A-001</title>
            </rect>
            <rect
               id="rect954-8"
               width="7.6631699"
               height="6.349884"
               x="104.71197"
               y="152.11729">
               <title
                  id="title1209">A-002</title>
            </rect>
            <rect
               id="rect954-1"
               width="5.5645981"
               height="6.3634186"
               x="112.37514"
               y="152.11729">
               <title
                  id="title1211">A-003</title>
            </rect>
            <rect
               id="rect977"
               width="1.307251"
               height="5.404892"
               x="56.301933"
               y="173.56059" />
            <rect
               id="rect1007"
               width="3.4419601"
               height="1.6029168"
               x="81.421959"
               y="177.76987" />
            <rect
               id="rect1011"
               width="3.1847153"
               height="1.6029205"
               x="84.863922"
               y="177.76987" />
            <rect
               id="rect1019"
               width="2.3900375"
               height="7.4128876"
               x="121.10602"
               y="177.79608">
               <title
                  id="title339">Caja</title>
            </rect>
            <rect
               id="rect1021"
               width="3.1715775"
               height="1.0670624"
               x="89.339531"
               y="184.14191" />
            <rect
               id="rect1023"
               width="3.1715775"
               height="2.1193848"
               x="89.339531"
               y="182.02252" />
            <rect
               id="rect1025"
               width="3.1715775"
               height="1.596283"
               x="89.339531"
               y="180.42624" />
            <rect
               id="rect1027"
               width="3.1715775"
               height="1.3192291"
               x="89.339531"
               y="179.10701" />
            <rect
               id="rect1031"
               width="3.1728439"
               height="4.4805298"
               x="115.0235"
               y="164.29578">
               <title
                  id="title327">Baño H</title>
            </rect>
            <rect
               id="rect1031-5"
               width="3.1728435"
               height="4.7773795"
               x="115.0235"
               y="168.77631">
               <title
                  id="title329">Baño M</title>
            </rect>
            <rect
               id="rect1085"
               width="3.4811487"
               height="7.4113517"
               x="127.12101"
               y="177.79607" />
            <rect
               id="rect1087"
               width="8.1058826"
               height="7.4299936"
               x="130.60216"
               y="177.79607" />
            <rect
               id="rect4849-1"
               width="3.4425454"
               height="6.3554392"
               x="154.97227"
               y="101.58434" />
            <rect
               id="rect4849-1-1"
               width="3.9628906"
               height="6.3474426"
               x="151.00938"
               y="101.59234">
               <title
                  id="title1179">B-033</title>
            </rect>
            <rect
               id="rect1245"
               width="6.9650497"
               height="10.851532"
               x="100.91508"
               y="136.25232">
               <title
                  id="title1251">Sala de Descanso</title>
            </rect>
            <rect
               id="rect1261"
               width="2.3868062"
               height="21.439245"
               x="190.42703"
               y="161.37825">
               <title
                  id="title1265">Noac Trasero</title>
            </rect>
            <rect
               id="rect1269"
               width="10.415001"
               height="5.5058098"
               x="85.297386"
               y="141.59802">
               <desc
                  id="desc273">Dep. Ingeniería Diseño de Productos</desc>
               <title
                  id="title1271">Dep. Ing. Diseño de Productos</title>
            </rect>
            <rect
               id="rect1273"
               width="2.3637633"
               height="11.61294"
               x="162.4001"
               y="89.969574" />
            <rect
               id="rect1275"
               width="2.6424863"
               height="5.8020401"
               x="164.76387"
               y="89.969574" />
            <rect
               id="rect1277"
               width="2.6433411"
               height="3.4337006"
               x="164.76387"
               y="98.148811" />
            <rect
               id="rect1031-5-8"
               width="3.1728435"
               height="4.7773795"
               x="120.57419"
               y="168.77135">
               <title
                  id="title315">Secretaría</title>
            </rect>
            <rect
               id="rect246"
               width="2.3778458"
               height="9.2529449"
               x="118.19634"
               y="164.29576" />
            <rect
               id="rect269"
               width="5.3463898"
               height="1.7677307"
               x="89.620735"
               y="171.78595">
               <title
                  id="title1184">Baño común</title>
            </rect>
            <rect
               id="rect1247"
               width="5.2026901"
               height="10.851532"
               x="95.712387"
               y="136.25232">
               <title
                  id="title1249">Fablab</title>
            </rect>
            <rect
               id="rect954-9"
               width="5.4710464"
               height="6.0873752"
               x="89.709084"
               y="152.38907">
               <title
                  id="title1207-0">A-017</title>
            </rect>
            <rect
               id="rect248"
               width="3.1759491"
               height="2.2592051"
               x="120.57108"
               y="166.51657">
               <title
                  id="title335">Baño M</title>
            </rect>
            <rect
               id="rect248-8"
               width="3.1759493"
               height="2.2592051"
               x="120.57108"
               y="164.29524">
               <title
                  id="title333">Baño H</title>
            </rect>
            <path
               d="m 120.52203,134.7802 7.51148,0.0249 c 0,0 0,0 0,0 0,0 0,-6.48362 0,-6.48362 l 5.83021,-6e-5 1e-5,6.48368 8.12963,-0.0249 v 11.30637 h -21.47133 z"
               id="path351"
               inkscape:connector-curvature="0">
               <title
                  id="title353">Casino</title>
            </path>
            <rect
               id="rect938"
               width="18.536316"
               height="11.394713"
               x="147.29306"
               y="78.57486">
               <title
                  id="title1173">Taller Metal Mecánico</title>
            </rect>
            <rect
               id="rect950"
               width="10.30719"
               height="11.373914"
               x="165.82938"
               y="78.57486"
               ry="0">
               <title
                  id="title1171">Lab. de Procesos</title>
            </rect>
            <rect
               id="rect952"
               width="15.870831"
               height="7.1465931"
               x="162.13206"
               y="62.174099">
               <title
                  id="title1174">Ingeniería Eléctrica</title>
            </rect>
            <rect
               id="rect1159"
               width="7.6650267"
               height="3.4363663"
               x="167.40721"
               y="98.148811">
               <title
                  id="title1177">B-064</title>
            </rect>
            <rect
               id="rect1161"
               width="7.6756034"
               height="5.8232236"
               x="167.40636"
               y="89.948387">
               <desc
                  id="desc1176">B-065</desc>
               <title
                  id="title1175">B-065</title>
            </rect>
            <rect
               id="rect1163"
               width="15.107043"
               height="11.611835"
               x="147.29306"
               y="89.969574">
               <title
                  id="title1181">Dep. Ingeniería Minas</title>
            </rect>
            <rect
               id="rect179"
               width="2.1793611"
               height="3.6523285"
               x="118.92539"
               y="181.55664">
               <title
                  id="title337">Escalera</title>
            </rect>
            <rect
               id="rect1015"
               width="2.1431334"
               height="1.8672667"
               x="85.86142"
               y="180.4304" />
         </g>

      </svg>
   </div>

</template>

<script>

export default {
   created(){
      console.log("Valor props:\n", Object.values(this.tasasOcupacion)[0])
   },
   mounted(){

      // se pinta cada zona dependiendo de su nivel de ocupación
      Object.keys(this.tasasOcupacion).forEach((i) => {
         document.getElementById(i).style.fill = 
            this.tasasOcupacion[i] < 0.33 ? 
            getComputedStyle(document.documentElement).getPropertyValue('--occ1') : 
               this.tasasOcupacion[i] < 0.66 ? 
               getComputedStyle(document.documentElement).getPropertyValue('--occ2') : 
                  this.tasasOcupacion[i] <= 1 ? 
                  getComputedStyle(document.documentElement).getPropertyValue('--occ3') : 
                  getComputedStyle(document.documentElement).getPropertyValue('--occ4');
      })
   }
}

</script>


<style>
@namespace xlink 'http://www.w3.org/1999/xlink';
:root {
   /* occupancy levels: <33%, 33% - 66%, 66% - 100%, >100% */
  --occ1: #65FD65;
  --occ2: #faf066;
  --occ3: #ef8833;
  --occ4: #EF5555;
}
/* elementos de imagen svg */
svg rect, svg path {
   /* fill: var(--occ1); */
   /* fill-opacity:0.5; */
   stroke:#666666;
   stroke-width:1.07402432;
   stroke-opacity:1
}

/* definir varibles de colores para cada nivel de ocupación */


.my-sgv-component{
   display: inline-block;
	position: absolute;
	top: 0;
	left: 0;
}
.svg-container{
   display: inline-block;
   position: relative;
   width: 100%;
   /* height: 100%; */
   /* padding-bottom: 100%; */
   vertical-align: middle;
   /* overflow: hidden; */
}
/* @media (min-width: 1024px) { */
   /* en este caso, se está definiendo el ancho del mapa segun el tamaño del contenedor externo.
   Quizás debería cambiar la disposición del texto y el mapa antes de seguir*/
   /* .svg-container{ */
   /* } */
/* } */

@media (max-width: 1024px) {
   .svg-container{
      overflow: scroll;
   }
}

</style>